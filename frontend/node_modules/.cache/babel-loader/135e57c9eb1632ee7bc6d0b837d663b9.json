{"ast":null,"code":"import \"core-js/modules/es.function.bind.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport '../../../govuk/vendor/polyfills/Function/prototype/bind';\nimport '../../../govuk/vendor/polyfills/Event'; // addEventListener and event.target normalization\nimport { toggleClass } from \"../../common\";\nfunction SearchResultsFilter($module) {\n  this.$module = $module;\n}\nSearchResultsFilter.prototype.init = function () {\n  // Check for module\n  var $module = this.$module;\n  if (!$module) {\n    return;\n  }\n  var $linkPanelButtons = $module.querySelectorAll('.idsk-search-results__link-panel-button');\n  if (!$linkPanelButtons) {\n    return;\n  }\n  var $topicSearchInput = $module.querySelector('#idsk-search-input__topic');\n  if ($topicSearchInput) {\n    $topicSearchInput.addEventListener('keyup', this.handleSearchItemsFromInput.bind(this, 'radios'));\n  }\n  var $subtopicSearchInput = $module.querySelector('#idsk-search-input__subtopic');\n  if ($subtopicSearchInput) {\n    $subtopicSearchInput.addEventListener('keyup', this.handleSearchItemsFromInput.bind(this, 'radios'));\n  }\n  var $contentTypeSearchInput = $module.querySelector('#idsk-search-input__content-type');\n  if ($contentTypeSearchInput) {\n    $contentTypeSearchInput.addEventListener('keyup', this.handleSearchItemsFromInput.bind(this, 'checkboxes'));\n  }\n  var $radioButtonsInput = $module.querySelectorAll('.idsk-search-results__filter .govuk-radios__input ');\n  if (!$radioButtonsInput) {\n    return;\n  }\n  var $contentTypeCheckBoxes = $module.querySelectorAll('.idsk-search-results__filter .govuk-checkboxes__input ');\n  if (!$contentTypeCheckBoxes) {\n    return;\n  }\n  $radioButtonsInput.forEach(function ($input) {\n    $input.addEventListener('click', this.handleClickRadioButton.bind(this), true);\n  }.bind(this));\n  $contentTypeCheckBoxes.forEach(function ($checkBox) {\n    $checkBox.addEventListener('click', this.handleClickContentTypeCheckBox.bind(this), true);\n  }.bind(this));\n  $linkPanelButtons.forEach(function ($button) {\n    $button.addEventListener('click', this.handleClickLinkPanel.bind(this));\n  }.bind(this));\n};\nSearchResultsFilter.prototype.handleClickRadioButton = function (e) {\n  var $el = e.target || e.srcElement;\n  var $linkPanelButton = $el.closest('.idsk-search-results__link-panel');\n  var $buttonCaption = $linkPanelButton.querySelector('.idsk-search-results__link-panel--span');\n  $buttonCaption.innerText = '1 vybraté';\n};\nSearchResultsFilter.prototype.handleClickContentTypeCheckBox = function (e) {\n  var $el = e.target || e.srcElement;\n  var $linkPanelButton = $el.closest('.idsk-search-results__link-panel');\n  var $checkBoxes = $el.closest('.govuk-checkboxes');\n  this.handleCountOfPickedContentTypes.call(this, $checkBoxes, $linkPanelButton);\n};\nSearchResultsFilter.prototype.handleCountOfPickedContentTypes = function ($checkBoxes, $linkPanelButton) {\n  var $buttonCaption = $linkPanelButton.querySelector('.idsk-search-results__link-panel--span');\n  var $counter = 0;\n  if ($checkBoxes) {\n    $checkBoxes.querySelectorAll('.govuk-checkboxes__input').forEach(function ($checkBox) {\n      if ($checkBox.checked) {\n        $counter = $counter + 1;\n      }\n    }.bind(this));\n  }\n  if ($counter == 0) {\n    $buttonCaption.innerText = '';\n  } else {\n    $buttonCaption.innerText = $counter + ' vybraté';\n  }\n};\nSearchResultsFilter.prototype.handleSearchItemsFromInput = function ($type, e) {\n  var $el = e.target || e.srcElement;\n  var $linkPanelButton = $el.closest('.idsk-search-results__link-panel');\n  var $items = $linkPanelButton.querySelectorAll('.govuk-' + $type + '__item');\n  $items.forEach(function ($item) {\n    $item.classList.remove('idsk-search-results--invisible');\n  }.bind(this));\n  $items.forEach(function ($item) {\n    var $labelItem = $item.querySelector('.govuk-' + $type + '__label');\n    if (!$labelItem.innerText.toLowerCase().includes($el.value.toLowerCase())) {\n      $item.classList.add('idsk-search-results--invisible');\n    }\n  }.bind(this));\n};\n\n/**\n * An event handler for click event on $linkPanel - collapse or expand filter\n * @param {object} e\n */\nSearchResultsFilter.prototype.handleClickLinkPanel = function (e) {\n  var $el = e.target || e.srcElement;\n  var $linkPanelButton = $el.closest('.idsk-search-results__link-panel');\n  var $contentPanel = $linkPanelButton.querySelector('.idsk-search-results__list');\n  toggleClass($contentPanel, 'idsk-search-results--hidden');\n  toggleClass($linkPanelButton, 'idsk-search-results--expand');\n};\nexport default SearchResultsFilter;","map":{"version":3,"names":["toggleClass","SearchResultsFilter","$module","prototype","init","$linkPanelButtons","querySelectorAll","$topicSearchInput","querySelector","addEventListener","handleSearchItemsFromInput","bind","$subtopicSearchInput","$contentTypeSearchInput","$radioButtonsInput","$contentTypeCheckBoxes","forEach","$input","handleClickRadioButton","$checkBox","handleClickContentTypeCheckBox","$button","handleClickLinkPanel","e","$el","target","srcElement","$linkPanelButton","closest","$buttonCaption","innerText","$checkBoxes","handleCountOfPickedContentTypes","call","$counter","checked","$type","$items","$item","classList","remove","$labelItem","toLowerCase","includes","value","add","$contentPanel"],"sources":["/Users/Maksym/Documents/GitHub/trebisov/frontend/node_modules/@id-sk/frontend/idsk/components/search-results-filter/search-results-filter.js"],"sourcesContent":["import '../../../govuk/vendor/polyfills/Function/prototype/bind'\nimport '../../../govuk/vendor/polyfills/Event' // addEventListener and event.target normalization\nimport { toggleClass } from \"../../common\";\n\nfunction SearchResultsFilter($module) {\n    this.$module = $module\n}\n\nSearchResultsFilter.prototype.init = function () {\n    // Check for module\n    var $module = this.$module\n    if (!$module) {\n        return\n    }\n\n    var $linkPanelButtons = $module.querySelectorAll('.idsk-search-results__link-panel-button')\n    if (!$linkPanelButtons) {\n        return\n    }\n\n    var $topicSearchInput = $module.querySelector('#idsk-search-input__topic')\n    if ($topicSearchInput) {\n        $topicSearchInput.addEventListener('keyup', this.handleSearchItemsFromInput.bind(this, 'radios'))\n    }\n\n    var $subtopicSearchInput = $module.querySelector('#idsk-search-input__subtopic')\n    if ($subtopicSearchInput) {\n        $subtopicSearchInput.addEventListener('keyup', this.handleSearchItemsFromInput.bind(this, 'radios'))\n    }\n\n    var $contentTypeSearchInput = $module.querySelector('#idsk-search-input__content-type')\n    if ($contentTypeSearchInput) {\n        $contentTypeSearchInput.addEventListener('keyup', this.handleSearchItemsFromInput.bind(this, 'checkboxes'))\n    }\n\n    var $radioButtonsInput = $module.querySelectorAll('.idsk-search-results__filter .govuk-radios__input ')\n    if (!$radioButtonsInput) {\n        return\n    }\n\n    var $contentTypeCheckBoxes = $module.querySelectorAll('.idsk-search-results__filter .govuk-checkboxes__input ')\n    if (!$contentTypeCheckBoxes) {\n        return\n    }\n\n    $radioButtonsInput.forEach(function ($input) {\n        $input.addEventListener('click', this.handleClickRadioButton.bind(this), true)\n    }.bind(this))\n\n    $contentTypeCheckBoxes.forEach(function ($checkBox) {\n        $checkBox.addEventListener('click', this.handleClickContentTypeCheckBox.bind(this), true)\n    }.bind(this))\n\n    $linkPanelButtons.forEach(function ($button) {\n        $button.addEventListener('click', this.handleClickLinkPanel.bind(this))\n    }.bind(this))\n}\n\nSearchResultsFilter.prototype.handleClickRadioButton = function (e) {\n    var $el = e.target || e.srcElement\n    var $linkPanelButton = $el.closest('.idsk-search-results__link-panel')\n    var $buttonCaption = $linkPanelButton.querySelector('.idsk-search-results__link-panel--span')\n\n    $buttonCaption.innerText = '1 vybraté'\n}\n\nSearchResultsFilter.prototype.handleClickContentTypeCheckBox = function (e) {\n    var $el = e.target || e.srcElement\n    var $linkPanelButton = $el.closest('.idsk-search-results__link-panel')\n    var $checkBoxes = $el.closest('.govuk-checkboxes')\n\n    this.handleCountOfPickedContentTypes.call(this, $checkBoxes, $linkPanelButton);\n}\n\nSearchResultsFilter.prototype.handleCountOfPickedContentTypes = function ($checkBoxes, $linkPanelButton) {\n    var $buttonCaption = $linkPanelButton.querySelector('.idsk-search-results__link-panel--span')\n    var $counter = 0\n\n    if ($checkBoxes) {\n        $checkBoxes.querySelectorAll('.govuk-checkboxes__input').forEach(function ($checkBox) {\n            if ($checkBox.checked) {\n                $counter = $counter + 1\n            }\n        }.bind(this))\n    }\n    if ($counter == 0) {\n        $buttonCaption.innerText = ''\n    } else {\n        $buttonCaption.innerText = $counter + ' vybraté'\n    }\n}\n\nSearchResultsFilter.prototype.handleSearchItemsFromInput = function ($type, e) {\n    var $el = e.target || e.srcElement\n    var $linkPanelButton = $el.closest('.idsk-search-results__link-panel')\n    var $items = $linkPanelButton.querySelectorAll('.govuk-' + $type + '__item')\n    $items.forEach(function ($item) {\n        $item.classList.remove('idsk-search-results--invisible')\n    }.bind(this))\n    $items.forEach(function ($item) {\n        var $labelItem = $item.querySelector('.govuk-' + $type + '__label')\n\n        if (!$labelItem.innerText.toLowerCase().includes($el.value.toLowerCase())) {\n            $item.classList.add('idsk-search-results--invisible')\n        }\n    }.bind(this))\n}\n\n/**\n * An event handler for click event on $linkPanel - collapse or expand filter\n * @param {object} e\n */\nSearchResultsFilter.prototype.handleClickLinkPanel = function (e) {\n    var $el = e.target || e.srcElement\n    var $linkPanelButton = $el.closest('.idsk-search-results__link-panel')\n    var $contentPanel = $linkPanelButton.querySelector('.idsk-search-results__list')\n\n    toggleClass($contentPanel, 'idsk-search-results--hidden')\n    toggleClass($linkPanelButton, 'idsk-search-results--expand')\n}\n\nexport default SearchResultsFilter\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}