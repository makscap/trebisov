{"ast":null,"code":"import _regeneratorRuntime from \"/Users/Maksym/Documents/GitHub/trebisov/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/Maksym/Documents/GitHub/trebisov/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.replace-all.js\";\nimport LoadingSpin from \"@/components/Loader\";\nimport ArticleView from \"../views/ArticleView.vue\";\nimport { useMeta } from \"vue-meta\";\nexport default {\n  name: \"ActivitiesView\",\n  setup: function setup() {\n    useMeta({\n      title: \"Aktivity\",\n      htmlAttrs: {\n        lang: \"sk\",\n        amp: true\n      },\n      meta: [{\n        charset: \"utf-8\"\n      }, {\n        name: \"description\",\n        content: \"Národný kooridnátor pre zvyšovanie bezpečnosti cestnej premávky\"\n      }, {\n        name: \"viewport\",\n        content: \"width=device-width, initial-scale=1\"\n      }]\n    });\n  },\n  components: {\n    LoadingSpin: LoadingSpin,\n    ArticleView: ArticleView\n  },\n  data: function data() {\n    return {\n      articles: [],\n      loaded: false,\n      page: 1,\n      pages: 5,\n      itemcount: 10,\n      type: null,\n      archive: false,\n      articleId: null,\n      types: [{\n        slug: \"aktivity\",\n        value: \"Aktivity\"\n      }, {\n        slug: \"chodci\",\n        value: \"Chodci\"\n      }, {\n        slug: \"cyklisti\",\n        value: \"Cyklisti\"\n      }, {\n        slug: \"deti\",\n        value: \"Deti\"\n      }, {\n        slug: \"mladi-vodici\",\n        value: \"Mladí vodiči\"\n      }, {\n        slug: \"motocyklisti\",\n        value: \"Motocyklisti\"\n      }, {\n        slug: \"profesionali\",\n        value: \"Profesionáli\"\n      }, {\n        slug: \"seniori\",\n        value: \"Seniori\"\n      }, {\n        slug: \"vizia-nula\",\n        value: \"Vízia nula\"\n      }, {\n        slug: \"vodici\",\n        value: \"Vodiči\"\n      }]\n    };\n  },\n  beforeMount: function beforeMount() {\n    this.articleId = this.$route.query.id;\n    this.getCategories();\n  },\n  watch: {\n    $route: {\n      // eslint-disable-next-line no-unused-vars\n      handler: function handler(val, oldVal) {\n        this.loaded = false;\n        this.articleId = this.$route.query.id;\n        var type = val.params.type;\n        // console.log(type);\n        if (type !== undefined) {\n          var checkType = this.types.filter(function (value) {\n            return value.slug == type;\n          });\n          if (checkType.length != 0) {\n            this.type = checkType[0];\n            this.getArticles();\n          }\n        } else {\n          this.type = null;\n          this.getArticles();\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    formatDate: function formatDate(dateString) {\n      var date = new Date(dateString);\n      var day = date.toLocaleDateString(\"en-us\", {\n        day: \"numeric\"\n      });\n      var month = date.toLocaleDateString(\"en-us\", {\n        month: \"numeric\"\n      });\n      var year = date.toLocaleDateString(\"en-us\", {\n        year: \"numeric\"\n      });\n      return \"\".concat(day, \".\").concat(month, \".\").concat(year);\n      // Then specify how you want your dates to be formatted\n    },\n    falseFunction: function falseFunction(e) {\n      e.preventDefault();\n    },\n    setPage: function setPage(page) {\n      this.page = page;\n      this.getArticles();\n    },\n    setPageFunction: function setPageFunction(number) {\n      if (number == -1) {\n        if (this.page > 1) {\n          this.page += number;\n          this.getArticles();\n        }\n      } else {\n        if (this.page < this.pages) {\n          this.page += number;\n          this.getArticles();\n        }\n      }\n    },\n    getCategories: function getCategories() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res, jsonData;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch(process.env.VUE_APP_API_URL + \"/categories\");\n              case 2:\n                res = _context.sent;\n                _context.next = 5;\n                return res.json();\n              case 5:\n                jsonData = _context.sent;\n                _this.types = _this.types.map(function (type) {\n                  var data = jsonData.data.find(function (d) {\n                    return d.attributes.name === type.value;\n                  });\n                  return {\n                    slug: type.slug,\n                    value: type.value,\n                    id: data.id\n                  };\n                });\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    getArticles: function getArticles() {\n      var _this2 = this;\n      this.articles = [];\n      this.loaded = false;\n      fetch(process.env.VUE_APP_API_URL + \"/articles?populate[0]=categories&populate[1]=titleImage&populate[2]=photoGallery.images&sort=datetime:desc&filters[$or][0][archive][$eq]=false&filters[$or][1][archive][$null]=true\".concat(this.type ? \"&filters[categories][name][$contains]=\" + this.type.value : \"\", \"&pagination[start]=\").concat(this.page == 1 ? 0 : (this.page - 2) * 9 + 10, \"&pagination[limit]=\").concat(this.page == 1 ? 10 : 9)).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        _this2.articles = data.data;\n        _this2.itemcount = data.meta.pagination.total;\n        _this2.pages = data.meta.total <= 10 ? 1 : Math.ceil((data.meta.pagination.total - 10) / 9) + 1;\n        // console.log(Math.ceil((data.meta.pagination.total - 10) / 9));\n        // console.log(data.data);\n        _this2.loaded = true;\n      })[\"catch\"]\n      // catch any errors\n      // that may arise\n      ();\n    },\n    toNormalForm: function toNormalForm(str) {\n      return str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").replaceAll(\" \", \"-\").toLowerCase().substring(0, 30) + \"...\";\n    },\n    getCrazyUrl: function getCrazyUrl(article) {\n      var _this$types$find;\n      return \"/aktuality/\".concat((_this$types$find = this.types.find(function (t) {\n        return t.id === article.attributes.categories.data[0].id;\n      })) === null || _this$types$find === void 0 ? void 0 : _this$types$find.slug, \"?id=\").concat(article.id, \"&name=\").concat(this.toNormalForm(article.attributes.name));\n    }\n  },\n  mounted: function mounted() {\n    var type = this.$route.params.type;\n    // console.log(type);\n    if (type !== undefined) {\n      var checkType = this.types.filter(function (value) {\n        return value.slug == type;\n      });\n      if (checkType.length != 0) {\n        this.type = checkType[0];\n        this.getArticles();\n      }\n    } else {\n      this.getArticles();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["LoadingSpin","ArticleView","useMeta","name","setup","title","htmlAttrs","lang","amp","meta","charset","content","components","data","articles","loaded","page","pages","itemcount","type","archive","articleId","types","slug","value","beforeMount","$route","query","id","getCategories","watch","handler","val","oldVal","params","undefined","checkType","filter","length","getArticles","deep","methods","formatDate","dateString","date","Date","day","toLocaleDateString","month","year","falseFunction","e","preventDefault","setPage","setPageFunction","number","fetch","process","env","VUE_APP_API_URL","res","json","jsonData","map","find","d","attributes","then","response","pagination","total","Math","ceil","toNormalForm","str","normalize","replace","replaceAll","toLowerCase","substring","getCrazyUrl","article","t","categories","mounted"],"sourceRoot":"","sources":["/Users/Maksym/Documents/GitHub/trebisov/frontend/src/views/ActivitiesView.vue"],"sourcesContent":["/* eslint-disable */\n<template>\n  <div>\n    <div v-if=\"!articleId\" class=\"govuk-width-container\">\n      <div class=\"govuk-main-wrapper govuk-main-wrapper--auto-spacing\">\n        <h1 class=\"govuk-heading-l\">{{ type ? type.value : \"Aktuality\" }}</h1>\n        <LoadingSpin v-if=\"!loaded\"></LoadingSpin>\n        <div v-if=\"loaded && articles.length > 0\">\n          <div class=\"govuk-grid-row height-grid\" v-if=\"page == 1\">\n            <div class=\"govuk-grid-column-full\">\n              <div class=\"idsk-card idsk-card-hero\">\n                <router-link\n                  :to=\"getCrazyUrl(articles[0])\"\n                  :title=\"\n                    'Po kliknutií sa otvorí v tomto okne článok s názvom ' +\n                    articles[0].attributes.name\n                  \"\n                >\n                  <img\n                    style=\"object-fit: cover\"\n                    class=\"idsk-card-img idsk-card-img-hero hero-img\"\n                    width=\"100%\"\n                    :src=\"\n                      articles[0].attributes.titleImage.data\n                        ? articles[0].attributes.titleImage.data.attributes.url\n                        : require('@/assets/becep_logo.svg')\n                    \"\n                    :alt=\"\n                      articles[0].attributes.titleImage.data\n                        ? 'Alternatívny popis obrázka je nasledujúci. ' +\n                          articles[0].attributes.titleImage.data.attributes.alternativeText.substring(\n                            0,\n                            70\n                          )\n                        : 'placeholder'\n                    \"\n                    aria-hidden=\"true\"\n                  />\n                </router-link>\n\n                <div class=\"idsk-card-content idsk-card-content-hero\">\n                  <div class=\"idsk-card-meta-container\">\n                    <span class=\"idsk-card-meta idsk-card-meta-date\"\n                      ><a\n                        href=\"\n                          #\n                        \"\n                        class=\"govuk-link\"\n                        @click=\"falseFunction\"\n                        :title=\"\n                          'Pridané dňa : ' + articles[0].attributes.datetime\n                        \"\n                        >{{\n                          // eslint-disable-next-line vue/no-deprecated-filter\n                          formatDate(articles[0].attributes.datetime)\n                        }}</a\n                      ></span\n                    >\n                    <span class=\"idsk-card-meta idsk-card-meta-tag\"\n                      ><a\n                        href=\"#\"\n                        class=\"govuk-link\"\n                        :title=\"\n                          'Článok patrí do kategórie ' +\n                          articles[0].attributes.categories.data[0].attributes\n                            .name\n                        \"\n                        @click=\"falseFunction\"\n                        >{{\n                          articles[0].attributes.categories.data[0].attributes\n                            .name\n                        }}</a\n                      ></span\n                    >\n                  </div>\n\n                  <div class=\"idsk-heading idsk-heading-hero\">\n                    <router-link\n                      :to=\"getCrazyUrl(articles[0])\"\n                      class=\"idsk-card-title govuk-link\"\n                      :title=\"\n                        'Po kliknutií sa otvorí v tomto okne článok s názvom ' +\n                        articles[0].attributes.name\n                      \"\n                      >{{ articles[0].attributes.name }}</router-link\n                    >\n                  </div>\n\n                  <p class=\"idsk-body idsk-body-hero\">\n                    {{ articles[0].attributes.description.substring(0, 270) }}\n                    ...\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <div v-if=\"loaded\" class=\"govuk-grid-row\">\n              <div\n                v-for=\"article in page == 1 ? articles.slice(1) : articles\"\n                :key=\"article.id\"\n                class=\"govuk-grid-column-one-third height-grid\"\n              >\n                <div class=\"idsk-card idsk-card-secondary\">\n                  <router-link\n                    :to=\"getCrazyUrl(article)\"\n                    :title=\"\n                      'Po kliknutií sa otvorí v tomto okne článok s názvom ' +\n                      article.attributes.name\n                    \"\n                  >\n                    <img\n                      class=\"idsk-card-img idsk-card-img-secondary item-img\"\n                      style=\"width: 100%; object-fit: cover\"\n                      :src=\"\n                        article.attributes.titleImage.data\n                          ? article.attributes.titleImage.data.attributes.url\n                          : require('@/assets/becep_logo.svg')\n                      \"\n                      :alt=\"\n                        article.attributes.titleImage.data\n                          ? 'Alternatívny popis obrázka je nasledujúci. ' +\n                            article.attributes.titleImage.data.attributes.alternativeText.substring(\n                              0,\n                              70\n                            )\n                          : 'placeholder'\n                      \"\n                      aria-hidden=\"true\"\n                    />\n                  </router-link>\n\n                  <div class=\"idsk-card-content idsk-card-content-secondary\">\n                    <div class=\"idsk-card-meta-container\">\n                      <span class=\"idsk-card-meta idsk-card-meta-date\"\n                        ><a\n                          href=\"#\"\n                          @click=\"falseFunction\"\n                          class=\"govuk-link\"\n                          :title=\"\n                            'Pridané dňa:' +\n                            formatDate(article.attributes.datetime)\n                          \"\n                          >{{ formatDate(article.attributes.datetime) }}</a\n                        ></span\n                      >\n                      <span class=\"idsk-card-meta idsk-card-meta-tag\"\n                        ><a\n                          :href=\"none\"\n                          class=\"govuk-link\"\n                          :title=\"\n                            'Článok patrí do kategórie ' +\n                            article.attributes.categories.data[0].attributes\n                              .name\n                          \"\n                          @click=\"falseFunction\"\n                          >{{\n                            article.attributes.categories.data[0].attributes\n                              .name\n                          }}</a\n                        ></span\n                      >\n                    </div>\n\n                    <div class=\"idsk-heading idsk-heading-secondary\">\n                      <router-link\n                        :to=\"getCrazyUrl(article)\"\n                        class=\"idsk-card-title govuk-link\"\n                        :title=\"\n                          'Po kliknutií sa otvorí v tomto okne článok s názvom ' +\n                          article.attributes.name\n                        \"\n                        >{{ article.attributes.name }}</router-link\n                      >\n                    </div>\n\n                    <p class=\"idsk-body idsk-body-secondary\">\n                      {{ article.attributes.description }} ...\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <ul v-if=\"this.pages > 1 && loaded\" class=\"pagination\">\n            <li class=\"page-item prev\" :class=\"page == 1 ? 'disabled ' : ''\">\n              <a\n                class=\"page-link\"\n                href=\"#\"\n                @click=\"\n                  falseFunction;\n                  setPageFunction(-1);\n                \"\n                >«</a\n              >\n            </li>\n            <li v-for=\"i in this.pages\" :key=\"i\" class=\"page-item\">\n              <a\n                :class=\"i === page ? 'activated' : 'page-link'\"\n                href=\"#\"\n                @click=\"\n                  falseFunction;\n                  setPage(i);\n                \"\n                >{{ i }}</a\n              >\n            </li>\n\n            <li class=\"page-item next\">\n              <a\n                class=\"page-link\"\n                :class=\"page == pages ? 'disabled ' : ''\"\n                href=\"#\"\n                @click=\"\n                  falseFunction;\n                  setPageFunction(1);\n                \"\n                >»</a\n              >\n            </li>\n          </ul>\n        </div>\n        <div v-else>\n          <h1 v-if=\"loaded\" class=\"govuk-heading-m\">\n            V tejto kategórii zatiaľ nemáme žiadne články\n          </h1>\n        </div>\n      </div>\n    </div>\n    <ArticleView v-if=\"articleId\" title=\"Aktualita\" />\n  </div>\n</template>\n<script>\nimport LoadingSpin from \"@/components/Loader\";\nimport ArticleView from \"../views/ArticleView.vue\";\nimport { useMeta } from \"vue-meta\";\n\nexport default {\n  name: \"ActivitiesView\",\n  setup() {\n    useMeta({\n      title: \"Aktivity\",\n      htmlAttrs: { lang: \"sk\", amp: true },\n      meta: [\n        { charset: \"utf-8\" },\n        {\n          name: \"description\",\n          content:\n            \"Národný kooridnátor pre zvyšovanie bezpečnosti cestnej premávky\",\n        },\n        {\n          name: \"viewport\",\n          content: \"width=device-width, initial-scale=1\",\n        },\n      ],\n    });\n  },\n  components: {\n    LoadingSpin,\n    ArticleView,\n  },\n  data() {\n    return {\n      articles: [],\n      loaded: false,\n      page: 1,\n      pages: 5,\n      itemcount: 10,\n      type: null,\n      archive: false,\n      articleId: null,\n      types: [\n        { slug: \"aktivity\", value: \"Aktivity\" },\n        { slug: \"chodci\", value: \"Chodci\" },\n        { slug: \"cyklisti\", value: \"Cyklisti\" },\n        { slug: \"deti\", value: \"Deti\" },\n        { slug: \"mladi-vodici\", value: \"Mladí vodiči\" },\n        { slug: \"motocyklisti\", value: \"Motocyklisti\" },\n        { slug: \"profesionali\", value: \"Profesionáli\" },\n        { slug: \"seniori\", value: \"Seniori\" },\n        { slug: \"vizia-nula\", value: \"Vízia nula\" },\n        { slug: \"vodici\", value: \"Vodiči\" },\n      ],\n    };\n  },\n  beforeMount() {\n    this.articleId = this.$route.query.id;\n    this.getCategories();\n  },\n  watch: {\n    $route: {\n      // eslint-disable-next-line no-unused-vars\n      handler: function (val, oldVal) {\n        this.loaded = false;\n        this.articleId = this.$route.query.id;\n        const type = val.params.type;\n        // console.log(type);\n        if (type !== undefined) {\n          const checkType = this.types.filter((value) => {\n            return value.slug == type;\n          });\n          if (checkType.length != 0) {\n            this.type = checkType[0];\n            this.getArticles();\n          }\n        } else {\n          this.type = null;\n          this.getArticles();\n        }\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      let day = date.toLocaleDateString(\"en-us\", { day: \"numeric\" });\n      let month = date.toLocaleDateString(\"en-us\", { month: \"numeric\" });\n      let year = date.toLocaleDateString(\"en-us\", { year: \"numeric\" });\n      return `${day}.${month}.${year}`;\n      // Then specify how you want your dates to be formatted\n    },\n    falseFunction(e) {\n      e.preventDefault();\n    },\n    setPage(page) {\n      this.page = page;\n      this.getArticles();\n    },\n    setPageFunction(number) {\n      if (number == -1) {\n        if (this.page > 1) {\n          this.page += number;\n          this.getArticles();\n        }\n      } else {\n        if (this.page < this.pages) {\n          this.page += number;\n          this.getArticles();\n        }\n      }\n    },\n    async getCategories() {\n      const res = await fetch(process.env.VUE_APP_API_URL + `/categories`);\n      const jsonData = await res.json();\n      this.types = this.types.map((type) => {\n        const data = jsonData.data.find((d) => {\n          return d.attributes.name === type.value;\n        });\n        return { slug: type.slug, value: type.value, id: data.id };\n      });\n    },\n    getArticles() {\n      this.articles = [];\n      this.loaded = false;\n      fetch(\n        process.env.VUE_APP_API_URL +\n          `/articles?populate[0]=categories&populate[1]=titleImage&populate[2]=photoGallery.images&sort=datetime:desc&filters[$or][0][archive][$eq]=false&filters[$or][1][archive][$null]=true${\n            this.type\n              ? \"&filters[categories][name][$contains]=\" + this.type.value\n              : \"\"\n          }&pagination[start]=${\n            this.page == 1 ? 0 : (this.page - 2) * 9 + 10\n          }&pagination[limit]=${this.page == 1 ? 10 : 9}`\n      )\n        .then((response) => response.json())\n        .then((data) => {\n          this.articles = data.data;\n          this.itemcount = data.meta.pagination.total;\n          this.pages =\n            data.meta.total <= 10\n              ? 1\n              : Math.ceil((data.meta.pagination.total - 10) / 9) + 1;\n          // console.log(Math.ceil((data.meta.pagination.total - 10) / 9));\n          // console.log(data.data);\n          this.loaded = true;\n        })\n\n        .catch\n        // catch any errors\n        // that may arise\n        ();\n    },\n    toNormalForm(str) {\n      return (\n        str\n          .normalize(\"NFD\")\n          .replace(/[\\u0300-\\u036f]/g, \"\")\n          .replaceAll(\" \", \"-\")\n          .toLowerCase()\n          .substring(0, 30) + \"...\"\n      );\n    },\n    getCrazyUrl(article) {\n      return `/aktuality/${\n        this.types.find(\n          (t) => t.id === article.attributes.categories.data[0].id\n        )?.slug\n      }?id=${article.id}&name=${this.toNormalForm(article.attributes.name)}`;\n    },\n  },\n\n  mounted() {\n    const type = this.$route.params.type;\n    // console.log(type);\n    if (type !== undefined) {\n      const checkType = this.types.filter((value) => {\n        return value.slug == type;\n      });\n      if (checkType.length != 0) {\n        this.type = checkType[0];\n        this.getArticles();\n      }\n    } else {\n      this.getArticles();\n    }\n  },\n};\n</script>\n<style>\n.idsk-card-meta .govuk-link:visited {\n  color: #626a6e;\n  text-decoration: none;\n}\n.idsk-card-meta .govuk-link {\n  color: #626a6e;\n  text-decoration: none;\n}\n.pagination {\n  margin-bottom: 70px;\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  flex-wrap: wrap;\n  padding-left: 0;\n  font-size: 1.2rem;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n}\n/* ul,\nol {\n  list-style: none;\n} */\n.pagination .disabled .page-link {\n  color: #dee0e2;\n}\n.pagination .disabled {\n  pointer-events: none;\n}\n.pagination .page-item .page-link:hover {\n  background: #dee0e2;\n  color: #204e2e;\n}\n\n/* .pagination .page-item .page-link:hover,\n.pagination .page-item .page-link:active {\n  background: #dee0e2;\n  color: black;\n} */\n.pagination .page-item {\n  margin-top: 0.5rem;\n  margin-right: 0.5rem;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.pagination .page-item .page-link {\n  position: relative;\n  display: block;\n  color: #204e2e;\n  text-decoration: none;\n  background-color: #fff;\n  border: 1px solid #dee0e2;\n  -webkit-transition: color 0.15s ease-in-out,\n    background-color 0.15s ease-in-out, border-color 0.15s ease-in-out,\n    -webkit-box-shadow 0.15s ease-in-out;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,\n    -webkit-box-shadow 0.15s ease-in-out;\n  padding: 0.375rem 0.75rem;\n}\n.pagination .page-item .activated {\n  position: relative;\n  display: block;\n  color: #fff;\n  text-decoration: none;\n  background-color: #204e2e;\n  border: 1px solid #dee0e2;\n  -webkit-transition: color 0.15s ease-in-out,\n    background-color 0.15s ease-in-out, border-color 0.15s ease-in-out,\n    -webkit-box-shadow 0.15s ease-in-out;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,\n    -webkit-box-shadow 0.15s ease-in-out;\n  padding: 0.375rem 0.75rem;\n}\n.hero-img {\n  height: 250px;\n}\n.item-img {\n  height: 200px;\n}\n.height-grid {\n  height: 400px;\n}\n@media (max-width: 960px) {\n  .hero-img {\n    height: 200px;\n  }\n  .item-img {\n    height: 200px;\n  }\n  .height-grid {\n    height: 410px;\n  }\n}\n@media (min-width: 960px) {\n  .hero-img {\n    height: 300px;\n  }\n  .item-img {\n    height: 200px;\n  }\n  .height-grid {\n    height: 410px;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}