{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-78f7c938\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"govuk-width-container\"\n};\nvar _hoisted_2 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"h1\", {\n    \"class\": \"govuk-heading-l\"\n  }, \"Výsledok vyhľadávania\", -1 /* HOISTED */);\n});\nvar _hoisted_3 = [\"action\"];\nvar _hoisted_4 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"button\", {\n    type: \"submit\",\n    \"class\": \"govuk-button\",\n    \"data-module\": \"govuk-button\"\n  }, [/*#__PURE__*/_createElementVNode(\"span\", {\n    \"class\": \"govuk-visually-hidden\"\n  }, \"Vyhľadať\"), /*#__PURE__*/_createElementVNode(\"i\", {\n    \"aria-hidden\": \"true\",\n    \"class\": \"fas fa-search\"\n  })], -1 /* HOISTED */);\n});\nvar _hoisted_5 = {\n  \"class\": \"search-container\"\n};\nvar _hoisted_6 = {\n  \"class\": \"idsk-customer-surveys-radios\"\n};\nvar _hoisted_7 = {\n  \"class\": \"govuk-radios\"\n};\nvar _hoisted_8 = {\n  \"class\": \"govuk-radios__item\"\n};\nvar _hoisted_9 = {\n  \"class\": \"govuk-label govuk-radios__label\"\n};\nvar _hoisted_10 = {\n  \"class\": \"govuk-radios__item\"\n};\nvar _hoisted_11 = {\n  \"class\": \"govuk-label govuk-radios__label\",\n  \"for\": \"Články\"\n};\nvar _hoisted_12 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"hr\", {\n    \"class\": \"idsk-crossroad-line\",\n    \"aria-hidden\": \"true\"\n  }, null, -1 /* HOISTED */);\n});\nvar _hoisted_13 = {\n  style: {\n    \"width\": \"100%\"\n  }\n};\nvar _hoisted_14 = {\n  \"class\": \"govuk-heading-m black\"\n};\nvar _hoisted_15 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"hr\", {\n    \"class\": \"idsk-crossroad-line\",\n    \"aria-hidden\": \"true\"\n  }, null, -1 /* HOISTED */);\n});\nvar _hoisted_16 = {\n  key: 0\n};\nvar _hoisted_17 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"hr\", {\n    \"class\": \"idsk-crossroad-line\",\n    \"aria-hidden\": \"true\"\n  }, null, -1 /* HOISTED */);\n});\nvar _hoisted_18 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"hr\", {\n    \"class\": \"idsk-crossroad-line\",\n    \"aria-hidden\": \"true\"\n  }, null, -1 /* HOISTED */);\n});\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", {\n    \"class\": \"idsk-header-web__main-action-search\",\n    action: \"/vyhladavanie?search=\".concat($data.searchText)\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"class\": \"govuk-input govuk-!-display-inline-block\",\n    id: \"idsk-header-web__main-action-search-input\",\n    name: \"search\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $data.searchText = $event;\n    }),\n    placeholder: \"Zadajte hľadaný výraz\",\n    title: \"Zadajte hľadaný výraz\",\n    type: \"search\",\n    \"aria-describedby\": \"input-width-30-hint\",\n    \"aria-label\": \"Zadajte hľadaný výraz\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.searchText]]), _hoisted_4], 8 /* PROPS */, _hoisted_3), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    \"class\": \"govuk-checkboxes__input\",\n    id: \"Podstránky\",\n    type: \"checkbox\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $data.subpages = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $data.subpages]]), _createElementVNode(\"label\", _hoisted_9, [_createTextVNode(\" Podstránky \"), _createElementVNode(\"small\", null, \"(\" + _toDisplayString($options.getResultPages.length) + \" \" + _toDisplayString($options.getSubpagesText) + \")\", 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_10, [_withDirectives(_createElementVNode(\"input\", {\n    \"class\": \"govuk-checkboxes__input\",\n    id: \"Články\",\n    name: \"nationality\",\n    type: \"checkbox\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n      return $data.articles = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $data.articles]]), _createElementVNode(\"label\", _hoisted_11, [_createTextVNode(\" Články \"), _createElementVNode(\"small\", null, \"(\" + _toDisplayString($data.results.length) + \" \" + _toDisplayString($options.getArticlesText) + \")\", 1 /* TEXT */)])])]), _hoisted_12]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"h3\", _hoisted_14, _toDisplayString($options.getCount) + \" \" + _toDisplayString($options.getSearchText), 1 /* TEXT */), _hoisted_15, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.getResultPages, function (page, index) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index\n    }, [$data.subpages ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [_createVNode(_component_router_link, {\n      \"class\": \"idsk-crossroad-title green link\",\n      to: page.path\n    }, {\n      \"default\": _withCtx(function () {\n        return [_createTextVNode(_toDisplayString(page.title), 1 /* TEXT */)];\n      }),\n\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"]), _hoisted_17])) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.results, function (result) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: result.id\n    }, [_createVNode(_component_router_link, {\n      \"class\": \"idsk-crossroad-title green link\",\n      to: $options.getCrazyUrl(result)\n    }, {\n      \"default\": _withCtx(function () {\n        return [_createTextVNode(_toDisplayString(result.name), 1 /* TEXT */)];\n      }),\n\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"]), _createElementVNode(\"p\", null, _toDisplayString(result.description), 1 /* TEXT */), _hoisted_18]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"mappings":"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","names":["_createElementVNode","type","style","_createElementBlock","_hoisted_1","_hoisted_2","action","$data","id","name","placeholder","title","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","$options","length","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_Fragment","page","index","key","_createVNode","_component_router_link","to","path","_hoisted_17","result","description","_hoisted_18"],"sourceRoot":"","sources":["/Users/Maksym/Documents/GitHub/trebisov/frontend/src/views/SearchResultView.vue"],"sourcesContent":["<template>\n  <div class=\"govuk-width-container\">\n    <h1 class=\"govuk-heading-l\">Výsledok vyhľadávania</h1>\n    <form\n      class=\"idsk-header-web__main-action-search\"\n      :action=\"`/vyhladavanie?search=${searchText}`\"\n    >\n      <input\n        class=\"govuk-input govuk-!-display-inline-block\"\n        id=\"idsk-header-web__main-action-search-input\"\n        name=\"search\"\n        v-model=\"searchText\"\n        placeholder=\"Zadajte hľadaný výraz\"\n        title=\"Zadajte hľadaný výraz\"\n        type=\"search\"\n        aria-describedby=\"input-width-30-hint\"\n        aria-label=\"Zadajte hľadaný výraz\"\n      />\n      <button type=\"submit\" class=\"govuk-button\" data-module=\"govuk-button\">\n        <span class=\"govuk-visually-hidden\">Vyhľadať</span>\n        <i aria-hidden=\"true\" class=\"fas fa-search\"></i>\n      </button>\n    </form>\n    <div class=\"search-container\">\n      <div class=\"idsk-customer-surveys-radios\">\n        <div class=\"govuk-radios\">\n          <div class=\"govuk-radios__item\">\n            <input\n              class=\"govuk-checkboxes__input\"\n              id=\"Podstránky\"\n              type=\"checkbox\"\n              v-model=\"subpages\"\n            />\n            <label class=\"govuk-label govuk-radios__label\">\n              Podstránky\n              <small>({{ getResultPages.length }} {{ getSubpagesText }})</small>\n            </label>\n          </div>\n          <div class=\"govuk-radios__item\">\n            <input\n              class=\"govuk-checkboxes__input\"\n              id=\"Články\"\n              name=\"nationality\"\n              type=\"checkbox\"\n              v-model=\"articles\"\n            />\n            <label class=\"govuk-label govuk-radios__label\" for=\"Články\">\n              Články <small>({{ results.length }} {{ getArticlesText }})</small>\n            </label>\n          </div>\n        </div>\n        <hr class=\"idsk-crossroad-line\" aria-hidden=\"true\" />\n      </div>\n      <div style=\"width: 100%\">\n        <h3 class=\"govuk-heading-m black\">\n          {{ getCount }} {{ getSearchText }}\n        </h3>\n        <hr class=\"idsk-crossroad-line\" aria-hidden=\"true\" />\n        <div v-for=\"(page, index) in getResultPages\" :key=\"index\">\n          <div v-if=\"subpages\">\n            <router-link\n              class=\"idsk-crossroad-title green link\"\n              :to=\"page.path\"\n            >\n              {{ page.title }}\n            </router-link>\n            <hr class=\"idsk-crossroad-line\" aria-hidden=\"true\" />\n          </div>\n        </div>\n        <div v-for=\"result in results\" :key=\"result.id\">\n          <router-link\n            class=\"idsk-crossroad-title green link\"\n            :to=\"getCrazyUrl(result)\"\n          >\n            {{ result.name }}\n          </router-link>\n          <p>{{ result.description }}</p>\n          <hr class=\"idsk-crossroad-line\" aria-hidden=\"true\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { routes } from \"@/router\";\nimport { useMeta } from \"vue-meta\";\n\nexport default {\n  name: \"SearchResultView\",\n  setup() {\n    useMeta({\n      title: \"Výsledok vyhľadávania\",\n      htmlAttrs: { lang: \"sk\", amp: true },\n      meta: [\n        { charset: \"utf-8\" },\n        {\n          name: \"description\",\n          content:\n            \"Národný kooridnátor pre zvyšovanie bezpečnosti cestnej premávky\",\n        },\n        {\n          name: \"viewport\",\n          content: \"width=device-width, initial-scale=1\",\n        },\n      ],\n    });\n  },\n  data() {\n    return {\n      pages: routes,\n      results: [],\n      loading: false,\n      articles: true,\n      subpages: false,\n      searchText: \"\",\n      types: [\n        { slug: \"becep\", value: \"BECEP\" },\n        { slug: \"aktivity\", value: \"Aktivity\" },\n        { slug: \"vizia-nula\", value: \"Vízia nula\" },\n        { slug: \"chodci\", value: \"Chodci\" },\n        { slug: \"deti\", value: \"Deti\" },\n        { slug: \"seniori\", value: \"Seniori\" },\n        { slug: \"cyklisti\", value: \"Cyklisti\" },\n        { slug: \"motocyklisti\", value: \"Motocyklisti\" },\n        { slug: \"vodici\", value: \"Vodiči\" },\n        { slug: \"mladi-vodici\", value: \"Mladí vodiči\" },\n        { slug: \"profesionali\", value: \"Profesionáli\" },\n      ],\n    };\n  },\n  mounted() {\n    this.fetchData();\n  },\n  computed: {\n    getResultPages: function () {\n      const filtered = this.pages.filter((page) => {\n        const utils = require(\"@/assets/utils.js\");\n        return this.removePunctuation(utils.latin(page.title))\n          .toLowerCase()\n          .includes(this.$route.query.search);\n      });\n      console.log(filtered);\n      return filtered;\n    },\n    getCount: function () {\n      let count = 0;\n      if (this.subpages) count += this.getResultPages.length;\n      if (this.articles) count += this.results.length;\n      return count;\n    },\n    getSearchText: function () {\n      if (this.getCount === 1) return \"výsledok\";\n      if (this.getCount >= 2 && this.getCount <= 4) return \"výsledky\";\n      return \"výsledkov\";\n    },\n    getSubpagesText: function () {\n      if (this.getResultPages.length === 1) return \"výsledok\";\n      if (this.getResultPages.length >= 2 && this.getCount <= 4)\n        return \"výsledky\";\n      return \"výsledkov\";\n    },\n    getArticlesText: function () {\n      if (this.results.length === 1) return \"výsledok\";\n      if (this.results.length >= 2 && this.getCount <= 4) return \"výsledky\";\n      return \"výsledkov\";\n    },\n  },\n  methods: {\n    fetchData() {\n      this.loading = true;\n      fetch(\n        process.env.VUE_APP_API_URL +\n          `/get-search-result?search=${this.$route.query.search}`\n      )\n        .then((response) => {\n          console.log(response);\n          return response.json();\n        })\n        .then((data) => {\n          this.results = data;\n          console.log(data);\n        })\n        .finally(() => (this.loading = false));\n    },\n    removePunctuation(string) {\n      return string.replace(/[!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~]/g, \"\");\n    },\n    toNormalForm(str) {\n      return (\n        str\n          .normalize(\"NFD\")\n          .replace(/[\\u0300-\\u036f]/g, \"\")\n          .replaceAll(\" \", \"-\")\n          .toLowerCase()\n          .substring(0, 30) + \"...\"\n      );\n    },\n    getCrazyUrl(article) {\n      return `/aktuality/${\n        this.types.find((t) => t.value === article.categories[0].name)?.slug\n      }?id=${article.id}&name=${this.toNormalForm(article.name)}`;\n    },\n    async getCategories() {\n      const res = await fetch(process.env.VUE_APP_API_URL + `/categories`);\n      const jsonData = await res.json();\n      this.types = this.types.map((type) => {\n        const data = jsonData.data.find((d) => {\n          return d.name === type.value;\n        });\n        return { slug: type.slug, value: type.value, id: data.id };\n      });\n    },\n  },\n\n  beforeMount() {\n    this.getCategories();\n  },\n};\n</script>\n\n<style scoped>\n.idsk-header-web__main-action-search {\n  width: auto;\n}\n.link {\n  font-size: 24px;\n  font-weight: 700;\n  margin-bottom: 20px;\n}\n.idsk-customer-surveys-radios {\n  min-width: 30%;\n  padding-right: 20px;\n}\n.search-container {\n  display: flex;\n}\n.govuk-checkboxes__input {\n  opacity: 1;\n  width: 30px;\n}\n.idsk-crossroad-title {\n  width: 100%;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}