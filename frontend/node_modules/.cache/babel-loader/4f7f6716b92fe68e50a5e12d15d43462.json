{"ast":null,"code":"import \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.replace-all.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport LoadingSpin from \"@/components/Loader\";\nimport ArticleView from \"../views/ArticleView.vue\";\nimport { useMeta } from \"vue-meta\";\nexport default {\n  name: \"GalleryView\",\n  setup: function setup() {\n    useMeta({\n      title: \"Galéria\",\n      htmlAttrs: {\n        lang: \"sk\",\n        amp: true\n      },\n      meta: [{\n        charset: \"utf-8\"\n      }, {\n        name: \"description\",\n        content: \"Národný kooridnátor pre zvyšovanie bezpečnosti cestnej premávky\"\n      }, {\n        name: \"viewport\",\n        content: \"width=device-width, initial-scale=1\"\n      }]\n    });\n  },\n  components: {\n    LoadingSpin: LoadingSpin,\n    ArticleView: ArticleView\n  },\n  data: function data() {\n    return {\n      articles: [],\n      loaded: false,\n      page: 1,\n      pages: 5,\n      itemcount: 6,\n      type: null\n    };\n  },\n  watch: {\n    $route: {\n      // eslint-disable-next-line no-unused-vars\n      handler: function handler(val, oldVal) {\n        this.loaded = false;\n        this.type = null;\n        this.articleId = this.$route.query.id;\n        if (this.articleId) {\n          this.getArticles();\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    formatDate: function formatDate(dateString) {\n      var date = new Date(dateString);\n      var day = date.toLocaleDateString(\"en-us\", {\n        day: \"numeric\"\n      });\n      var month = date.toLocaleDateString(\"en-us\", {\n        month: \"numeric\"\n      });\n      var year = date.toLocaleDateString(\"en-us\", {\n        year: \"numeric\"\n      });\n      return \"\".concat(day, \".\").concat(month, \".\").concat(year);\n      // Then specify how you want your dates to be formatted\n    },\n    falseFunction: function falseFunction(e) {\n      e.preventDefault();\n    },\n    setPage: function setPage(page) {\n      this.page = page;\n      this.getArticles();\n    },\n    setPageFunction: function setPageFunction(number) {\n      if (number == -1) {\n        if (this.page > 1) {\n          this.page += number;\n          this.getArticles();\n        }\n      } else {\n        if (this.page < this.pages) {\n          this.page += number;\n          this.getArticles();\n        }\n      }\n    },\n    getArticles: function getArticles() {\n      var _this = this;\n      this.articles = [];\n      this.loaded = false;\n      fetch(process.env.VUE_APP_API_URL + \"/articles?populate[0]=categories&populate[1]=titleImage&populate[2]=photoGallery.images&sort=datetime:desc&filters[photoGallery][id][$notNull]=true&pagination[start]=\".concat((this.page - 1) * 6, \"&pagination[limit]=6\")).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        _this.articles = data.data;\n        _this.itemcount = data.meta.pagination.total;\n        console.log(data);\n        _this.pages = data.meta.total <= 6 ? 1 : Math.ceil(data.meta.pagination.total / 6);\n        // console.log(Math.ceil((data.meta.pagination.total - 10) / 9));\n        // console.log(data.data);\n        _this.loaded = true;\n      })[\"catch\"]\n      // catch any errors\n      // that may arise\n      ();\n    },\n    toNormalForm: function toNormalForm(str) {\n      return str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").replaceAll(\" \", \"-\").toLowerCase().substring(0, 30) + \"...\";\n    },\n    getCrazyUrl: function getCrazyUrl(article) {\n      return \"/galeria?id=\".concat(article.id, \"&name=\").concat(this.toNormalForm(article.attributes.name));\n    }\n  },\n  mounted: function mounted() {\n    this.articleId = this.$route.query.id;\n    this.getArticles();\n  }\n};","map":{"version":3,"mappings":"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","names":["LoadingSpin","ArticleView","useMeta","name","setup","title","htmlAttrs","lang","amp","meta","charset","content","components","data","articles","loaded","page","pages","itemcount","type","watch","$route","handler","val","oldVal","articleId","query","id","getArticles","deep","methods","formatDate","dateString","date","Date","day","toLocaleDateString","month","year","falseFunction","e","preventDefault","setPage","setPageFunction","number","fetch","process","env","VUE_APP_API_URL","then","response","json","pagination","total","console","log","Math","ceil","toNormalForm","str","normalize","replace","replaceAll","toLowerCase","substring","getCrazyUrl","article","attributes","mounted"],"sourceRoot":"","sources":["/Users/Maksym/Documents/GitHub/trebisov/frontend/src/views/GalleryView.vue"],"sourcesContent":["<template>\n  <div>\n    <div v-if=\"!articleId\">\n      <div class=\"govuk-width-container\">\n        <div class=\"govuk-main-wrapper govuk-main-wrapper--auto-spacing\">\n          <h1 class=\"govuk-heading-l\">Galéria</h1>\n          <LoadingSpin v-if=\"!loaded\"></LoadingSpin>\n          <div v-if=\"loaded && articles.length > 0\">\n            <div>\n              <div v-if=\"loaded\" class=\"govuk-grid-row\">\n                <div\n                  v-for=\"article in page == 1 ? articles : articles\"\n                  :key=\"article.id\"\n                  class=\"govuk-grid-column-one-half\"\n                >\n                  <div class=\"idsk-card idsk-card-simple\">\n                    <router-link\n                      :to=\"getCrazyUrl(article)\"\n                      :title=\"article.attributes.name\"\n                    >\n                      <img\n                        class=\"idsk-card-img idsk-card-img-simple item-img\"\n                        style=\"width: 100%; object-fit: cover\"\n                        :src=\"\n                          article.attributes.titleImage.data\n                            ? article.attributes.titleImage.data.attributes.url\n                            : require('@/assets/becep_logo.svg')\n                        \"\n                        :alt=\"\n                          article.attributes.titleImage.data\n                            ? 'Alternatívny popis obrázka je nasledujúci. ' +\n                              article.attributes.titleImage.data.attributes.alternativeText.substring(\n                                0,\n                                70\n                              )\n                            : 'placeholder'\n                        \"\n                        aria-hidden=\"true\"\n                      />\n                    </router-link>\n\n                    <div class=\"idsk-card-content idsk-card-content-simple\">\n                      <div class=\"idsk-card-meta-container\">\n                        <span class=\"idsk-card-meta idsk-card-meta-date\"\n                          ><a\n                            href=\"#\"\n                            class=\"govuk-link\"\n                            :title=\"\n                              'Pridané dňa:' +\n                              formatDate(article.attributes.datetime)\n                            \"\n                            >{{ formatDate(article.attributes.datetime) }}</a\n                          ></span\n                        >\n                        <span class=\"idsk-card-meta idsk-card-meta-tag\"\n                          ><a\n                            :href=\"none\"\n                            class=\"govuk-link\"\n                            :title=\"\n                              article.attributes.categories.data[0].attributes\n                                .name\n                            \"\n                            @click=\"falseFunction\"\n                            >{{\n                              article.attributes.categories.data[0].attributes\n                                .name\n                            }}</a\n                          ></span\n                        >\n                      </div>\n\n                      <div class=\"idsk-heading idsk-heading-simple\">\n                        <router-link\n                          :to=\"getCrazyUrl(article)\"\n                          :title=\"article.attributes.name\"\n                          class=\"idsk-card-title govuk-link\"\n                        >\n                          {{ article.attributes.name }}</router-link\n                        >\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <ul v-if=\"this.pages > 1 && loaded\" class=\"pagination\">\n              <li class=\"page-item prev\" :class=\"page == 1 ? 'disabled ' : ''\">\n                <a\n                  class=\"page-link\"\n                  href=\"#\"\n                  @click=\"\n                    falseFunction;\n                    setPageFunction(-1);\n                  \"\n                  >«</a\n                >\n              </li>\n              <li v-for=\"i in this.pages\" :key=\"i\" class=\"page-item\">\n                <a\n                  :class=\"i === page ? 'activated' : 'page-link'\"\n                  href=\"#\"\n                  @click=\"\n                    falseFunction;\n                    setPage(i);\n                  \"\n                  >{{ i }}</a\n                >\n              </li>\n\n              <li class=\"page-item next\">\n                <a\n                  class=\"page-link\"\n                  :class=\"page == pages ? 'disabled ' : ''\"\n                  href=\"#\"\n                  @click=\"\n                    falseFunction;\n                    setPageFunction(1);\n                  \"\n                  >»</a\n                >\n              </li>\n            </ul>\n          </div>\n          <div v-else>\n            <h1 v-if=\"loaded\" class=\"govuk-heading-m\">\n              V tejto kategórii zatiaľ nemáme žiadne články\n            </h1>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <ArticleView v-if=\"articleId\" title=\"Aktualita\" />\n  </div>\n</template>\n<script>\nimport LoadingSpin from \"@/components/Loader\";\nimport ArticleView from \"../views/ArticleView.vue\";\nimport { useMeta } from \"vue-meta\";\n\nexport default {\n  name: \"GalleryView\",\n  setup() {\n    useMeta({\n      title: \"Galéria\",\n      htmlAttrs: { lang: \"sk\", amp: true },\n      meta: [\n        { charset: \"utf-8\" },\n        {\n          name: \"description\",\n          content:\n            \"Národný kooridnátor pre zvyšovanie bezpečnosti cestnej premávky\",\n        },\n        {\n          name: \"viewport\",\n          content: \"width=device-width, initial-scale=1\",\n        },\n      ],\n    });\n  },\n  components: {\n    LoadingSpin,\n    ArticleView,\n  },\n  data() {\n    return {\n      articles: [],\n      loaded: false,\n      page: 1,\n      pages: 5,\n      itemcount: 6,\n      type: null,\n    };\n  },\n  watch: {\n    $route: {\n      // eslint-disable-next-line no-unused-vars\n      handler: function (val, oldVal) {\n        this.loaded = false;\n\n        this.type = null;\n        this.articleId = this.$route.query.id;\n        if (this.articleId) {\n          this.getArticles();\n        }\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      let day = date.toLocaleDateString(\"en-us\", { day: \"numeric\" });\n      let month = date.toLocaleDateString(\"en-us\", { month: \"numeric\" });\n      let year = date.toLocaleDateString(\"en-us\", { year: \"numeric\" });\n      return `${day}.${month}.${year}`;\n      // Then specify how you want your dates to be formatted\n    },\n    falseFunction(e) {\n      e.preventDefault();\n    },\n    setPage(page) {\n      this.page = page;\n      this.getArticles();\n    },\n    setPageFunction(number) {\n      if (number == -1) {\n        if (this.page > 1) {\n          this.page += number;\n          this.getArticles();\n        }\n      } else {\n        if (this.page < this.pages) {\n          this.page += number;\n          this.getArticles();\n        }\n      }\n    },\n    getArticles() {\n      this.articles = [];\n      this.loaded = false;\n\n      fetch(\n        process.env.VUE_APP_API_URL +\n          `/articles?populate[0]=categories&populate[1]=titleImage&populate[2]=photoGallery.images&sort=datetime:desc&filters[photoGallery][id][$notNull]=true&pagination[start]=${\n            (this.page - 1) * 6\n          }&pagination[limit]=6`\n      )\n        .then((response) => response.json())\n        .then((data) => {\n          this.articles = data.data;\n          this.itemcount = data.meta.pagination.total;\n          console.log(data);\n          this.pages =\n            data.meta.total <= 6\n              ? 1\n              : Math.ceil(data.meta.pagination.total / 6);\n          // console.log(Math.ceil((data.meta.pagination.total - 10) / 9));\n          // console.log(data.data);\n          this.loaded = true;\n        })\n\n        .catch\n        // catch any errors\n        // that may arise\n        ();\n    },\n    toNormalForm(str) {\n      return (\n        str\n          .normalize(\"NFD\")\n          .replace(/[\\u0300-\\u036f]/g, \"\")\n          .replaceAll(\" \", \"-\")\n          .toLowerCase()\n          .substring(0, 30) + \"...\"\n      );\n    },\n\n    getCrazyUrl(article) {\n      return `/galeria?id=${article.id}&name=${this.toNormalForm(\n        article.attributes.name\n      )}`;\n    },\n  },\n  mounted() {\n    this.articleId = this.$route.query.id;\n    this.getArticles();\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.archive-grid {\n  display: grid;\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  column-gap: 40px;\n}\n.idsk-card-meta .govuk-link:visited {\n  color: #626a6e;\n  text-decoration: none;\n}\n.idsk-card-meta .govuk-link {\n  color: #626a6e;\n  text-decoration: none;\n}\n.pagination {\n  margin-bottom: 70px;\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  flex-wrap: wrap;\n  padding-left: 0;\n  font-size: 1.2rem;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n}\n// ul,\n// ol {\n//   list-style: none;\n// }\n.pagination .disabled .page-link {\n  color: #dee0e2;\n}\n.pagination .disabled {\n  pointer-events: none;\n}\n.pagination .page-item .page-link:hover {\n  background: #dee0e2;\n  color: #204e2e;\n}\n.idsk-card-content,\n.idsk-card-content-secondary {\n  min-height: 0 !important;\n}\n\n@media (min-width: 40.0625em) {\n  .idsk-heading-basic-variant,\n  .idsk-heading-simple {\n    font-size: 19px;\n    font-size: 1.1875rem;\n    line-height: 1.3157894737;\n    min-height: 100px;\n  }\n}\n.pagination .page-item {\n  margin-top: 0.5rem;\n  margin-right: 0.5rem;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.pagination .page-item .page-link {\n  position: relative;\n  display: block;\n  color: #204e2e;\n  text-decoration: none;\n  background-color: #fff;\n  border: 1px solid #dee0e2;\n  -webkit-transition: color 0.15s ease-in-out,\n    background-color 0.15s ease-in-out, border-color 0.15s ease-in-out,\n    -webkit-box-shadow 0.15s ease-in-out;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,\n    -webkit-box-shadow 0.15s ease-in-out;\n  padding: 0.375rem 0.75rem;\n}\n.pagination .page-item .activated {\n  position: relative;\n  display: block;\n  color: #fff;\n  text-decoration: none;\n  background-color: #204e2e;\n  border: 1px solid #dee0e2;\n  -webkit-transition: color 0.15s ease-in-out,\n    background-color 0.15s ease-in-out, border-color 0.15s ease-in-out,\n    -webkit-box-shadow 0.15s ease-in-out;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,\n    -webkit-box-shadow 0.15s ease-in-out;\n  padding: 0.375rem 0.75rem;\n}\n.hero-img {\n  height: 250px;\n}\n.item-img {\n  height: 200px;\n}\n.height-grid {\n  height: 400px;\n}\n@media (max-width: 960px) {\n  .hero-img {\n    height: 200px;\n  }\n  .item-img {\n    height: 200px;\n  }\n  .height-grid {\n    height: 410px;\n  }\n}\n@media (min-width: 960px) {\n  .hero-img {\n    height: 300px;\n  }\n  .item-img {\n    height: 200px;\n  }\n  .height-grid {\n    height: 410px;\n  }\n}\n@media (min-width: 40.0625em) {\n  .idsk-card-simple {\n    width: 100%;\n    float: left;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}